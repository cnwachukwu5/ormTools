<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:ui="http://java.sun.com/jsf/facelets" 
	xmlns:h="http://java.sun.com/jsf/html" 
	xmlns:f="http://java.sun.com/jsf/core" 
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>
	<title>Operational Risk Management Tools</title>
</h:head>
<h:body>
	<ui:composition template="/template/layout.xhtml">
		<ui:define name="content">
			<h:outputStylesheet library="css" name="stylemenu.css"/>
			<span style="font-weight: bold; font-size: 20px">KRI Manager</span><p:separator/>
			<div class="kri_manager">
				<h4 style="margin-left: 1%">Add KRI - Batch upload</h4>
				<p:spacer width="20" height="33"/><p:spacer width="20" height="33"/>
				
				<div class="panel panel-primary" id="downloadKRITemplate">
					<div class="panel-heading">Download KRI Template</div>
					<div class="panel-body">
					<p:dialog modal="true" widgetVar="statusDialog" header="Downloading" draggable="false" closable="false" resizable="false">
						<p:graphicImage url="/images/status1.jpg"/>
					</p:dialog>
					<h:form>
						
						<p:commandButton value="Download Template" ajax="false" icon="ui-icon-arrowthick-1-s" onclick="PrimeFaces.monitorDownload(start, stop);" style="padding: 0.5% 5%; margin-top:1%;margin-left:10%">
							<p:fileDownload value="#{fileDownloadBean.file}" />
						</p:commandButton>
							<p:spacer width="20"/>
						<p:outputLabel value="Use the template to create batch KRIs file for upload" style="margin-left: 5%"/>
					</h:form>
					<script type="text/javascript">
						function start(){
							PF('statusDialog').show();
						}
						
						function stop(){
							PF('statusDialog').hide();
						}
					</script>
					</div>
				</div>
				
				<div class="panel panel-primary" id="uploadKRiTemplate" style="margin-top: 8%">
					<div class="panel-heading">Batch Upload KRI</div>
					<div class="panel-body">
					<h:form enctype="multipart/form-data">
						<p:messages id="messages" closable="true"/>
						<p:outputLabel value="Click on the 'Choose' button to select KRI upload file" style="font-size: 10px"/>
						<p:fileUpload value="#{fileUploadBean.file}" fileUploadListener="#{fileUploadBean.handleKRIUpload}" mode="advanced" dragDropSupport="false" update="messages" sizeLimit="500000" fileLimit="1" allowTypes="/(\.|\/)(xls)$/" invalidSizeMessage="Selected file larger than 500kb" fileLimitMessage="Only one file can be uploaded ..." style="width:70%;"/>
						
					</h:form>
					</div>
				</div>
			</div>	
		</ui:define>
	</ui:composition>	
</h:body>
</html>