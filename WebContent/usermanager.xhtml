<!DOCTYPE html>
<html lang="en" 
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html" 
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>
    
	<title>Operational Risk Management Tools</title>
	<style>
	html, body {
    		height: 100%;
    		width: 100%;
		}
		body{
			overflow-x: hidden;
			font-size: 12px;
		}
		.contain-fluid{
			width:100%;
    		height:100%;
		}
		.sidebar {
    		position: fixed;
			height:100%;
    		background:gray;
		}
		
		.contents{
			position: fixed;
			left: 16.7%;
		}
		ul.menu {
				list-style-type: none;
				margin: 0;
				padding: 0;
				display: block;
				width:100%;
				margin-bottom: 100%;
				
		}
		li a {
				display: block;
				color: #000;
				padding: 10px 16px;
				text-decoration: none;
				width:100%
			}
		li a:hover {
				background-color: #ff6347;
				color: white;
				text-decoration: none;
			}
		
	</style>
</h:head>
<h:body>
	<div class="container navbar-inverse" style="padding: 0;margin:0; width:100%">
			<div class="row" style="background-color:">
				<div class="col-md-9 col-lg-9" style="background-color:">
					<div class="navbar-header" style="margin-left:3%; padding:0">
						<a class="navbar-brand" href="#">Operational Risk Management Tool</a>
					</div>
				</div>
				<div class="col-md-3 col-lg-3" style="background-color:">
					<div class="collapse navbar-collapse">
						<ul class="nav navbar-nav navbar-right">
							<li><a href="#">Logged In as: #{userBean.loggeduser.getRole().getRole()} </a></li>
							<li>
								<h:form id="form3" style="margin-top:4%;">
									<p:commandLink action="#{userBean.logout()}"><h:outputText style="color: gray;" value="Sign out"/></p:commandLink>
								</h:form>
							</li>
						</ul>
					</div>
				</div>
			</div>			
		</div>
		<div class="container-fluid" style="">
			<div class="row">
				<div class="col-md-2 col-lg-2 sidebar" style="padding:0;margin:0;height:100%">
					<h:form>
			<ul class="menu">
				<li>
					<p:commandLink class="menulist">
						<h:outputText value="Menu"/> 
					</p:commandLink>
				</li>
				<li>
					<p:commandLink class="menulist" action="#{userBean.showUserManager()}">
						<h:outputText value="User Manager" /> 
					</p:commandLink>
				</li>
				<li>
					<p:commandLink class="menulist">
						<h:outputText value="KRI Manager" /> 
					</p:commandLink>
				</li>
				<li>
					<p:commandLink class="menulist">
						<h:outputText value="Incident Register" /> 
					</p:commandLink>
				</li>
				<li>
					<p:commandLink class="menulist">
						<h:outputText value="View Report" /> 
					</p:commandLink>
				</li>
			</ul>
		</h:form>
			</div>
				<div class="col-md-10 col-lg-10 contents" style="padding:0;margin:0;background-color:pink">
					<p:tabView id="tabView1" style="width:100%">
    			<p:tab id="tab1" title="Create User">
    				<h:form id="form1">
    					<p:messages id="messages" closable="true"/>
    					<h:panelGrid columns="5" cellpadding="10" cellspacing="3">
    						<p:outputLabel for="firstname" value="Firstname: "/><p:spacer width="20"/>
    						<p:inputText id="firstname" value="#{userBean.user.firstname}" label="Firstname" required="true" requiredMessage="Firstname required" validatorMessage="Only letters (A-Z, a-z) allowed in this fields">
    							<f:validateRegex pattern="^[A-Z][a-zA-Z]+"/>
    						</p:inputText><p:spacer width="20"/>
    						<p:message for="firstname" display="text"/>
    						<p:spacer width="20" height="33"/> <p:spacer width="20" height="33"/> <p:spacer width="20" height="33"/><p:spacer width="20" height="33"/><p:spacer width="20" height="33"/>
    						
    						<p:outputLabel for="lastname" value="Lastname: "/><p:spacer width="20"/>
    						<p:inputText id="lastname" value="#{userBean.user.lastname}" label="Lastname" required="true" requiredMessage="Lastname required" validatorMessage="Only letters (A-Z, a-z) allowed in this field">
    							<f:validateRegex pattern="^[a-zA-z]+([ '-][a-zA-Z]+)*" />
    						</p:inputText><p:spacer width="20"/>
    						<p:message for="lastname" display="text"/>
    						<p:spacer width="20" height="33"/> <p:spacer width="20" height="33"/> <p:spacer width="20" height="33"/><p:spacer width="20" height="33"/><p:spacer width="20" height="33"/>
    						
    						<p:outputLabel for="username" value="Username: "/><p:spacer width="20"/>
    						<p:inputText id="username" value="#{userBean.user.username}" label="username" required="true" requiredMessage="Username is required" validatorMessage="Only letters and number allowed in this field">
    							<f:validateRegex pattern="^[a-zA-Z0-9]+"/>
    						</p:inputText><p:spacer width="20"/>
    						<p:message for="username" display="text"/>
    						<p:spacer width="20" height="33"/> <p:spacer width="20" height="33"/> <p:spacer width="20" height="33"/><p:spacer width="20" height="33"/><p:spacer width="20" height="33"/>
    						
    						<p:outputLabel for="password" value="Password: "/><p:spacer width="20"/>
    						<p:password id="password" value="#{userBean.user.pwd}" label="Password" required="true" requiredMessage="Password required" /><p:spacer width="20"/>
    						<p:message for="password" display="text"/>
    						<p:spacer width="20" height="33"/> <p:spacer width="20" height="33"/> <p:spacer width="20" height="33"/><p:spacer width="20" height="33"/><p:spacer width="20" height="33"/>
    						
    						<p:outputLabel for="email" value="Email: "/><p:spacer width="20"/>
    						<p:inputText id="email" value="#{userBean.user.email}" label="email" required="true" requiredMessage="Email required" validatorMessage="Invalid email format">
    							<f:validateRegex pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
    						</p:inputText><p:spacer width="20"/>
    						<p:message for="email" display="text"/>
    						<p:spacer width="20" height="33"/> <p:spacer width="20" height="33"/> <p:spacer width="20" height="33"/><p:spacer width="20" height="33"/><p:spacer width="20" height="33"/>
    						
    						<p:outputLabel for="role" value="Role: "/><p:spacer width="20"/>
    						<p:selectOneMenu id="role" value="#{userBean.user.role}" style="width:170px" required="true" requiredMessage="Role required" converter="selectOneMenuConverter">
    							<f:selectItem itemLabel="Select user role" itemValue=""></f:selectItem>
    							<f:selectItems value="#{roleBean.roles}" var="role" itemLabel="#{role.role}" itemValue="#{role}" />
    						</p:selectOneMenu><p:spacer width="20"/>
    						<p:message for="role" display="text"/>
    						<p:spacer width="20" height="33"/> <p:spacer width="20" height="33"/> <p:spacer width="20" height="33"/><p:spacer width="20" height="33"/><p:spacer width="20" height="33"/>
    						
    						<p:outputLabel for="departments" value="Department: "/><p:spacer width="20"/>
    						<p:selectOneMenu id="departments" value="#{userBean.user.department}" converter="selectOneMenuConverter" style="width:190px" required="true" requiredMessage="Department is required">
    							<f:selectItem itemLabel="Select department" itemValue=""></f:selectItem>
    							<f:selectItems value="#{departmentBean.departments}" var="dept" itemLabel="#{dept.dept_name}" itemValue="#{dept}"/>
    						</p:selectOneMenu><p:spacer width="20"/>
    						<p:commandLink class="btn btn-default" onclick="PF('departmentdlg').show();">
    							<h:outputText value="Add department"/>
    						</p:commandLink>
    						<p:spacer width="20" height="32"/> <p:spacer width="20" height="32"/> <p:spacer width="20" height="32"/><p:spacer width="20" height="32"/><p:spacer width="20" height="32"/>
    					</h:panelGrid><br/>
    					<p:spacer width="90" height="30"/>
    					<p:commandButton value="Create User" actionListener="#{userBean.addUser()}" update="form1"/>
    					<p:spacer width="70" height="30"/>
    					<p:commandButton value="Cancel" oncomplete="PF('userdlg').hide();"/>
    					<p:spacer width="70" height="60"/>
    				</h:form>
    			</p:tab>
    			<p:tab title="Update User">
    			
    			</p:tab>
    			<p:tab title="Delete User">
    			
    			</p:tab>
    		</p:tabView>
    		<p:dialog id="dlg2" header="Add Department" widgetVar="departmentdlg" height="150" width="420" resizable="false" position="center" draggable="false" closable="false" responsive="true" onShow="PF('departmentdlg').initPosition()">
    		<h:form id="form2">
    			<p:messages id="messages"/>
    			<h:panelGrid columns="2" cellpadding="10" cellspacing="3">
    				<p:outputLabel for="department" value="Department:  "/>
    				<p:inputText id="department" value="#{departmentBean.department.dept_name}" required="true"/>
    				<p:spacer width="20"/> <p:spacer width="20"/>
    				<p:commandButton id="addDepartment" value="Add Department" actionListener="#{departmentBean.addDepartment(departmentBean.department)}" update="messages"/>
    				
    				<p:commandButton style="margin-left:10%" value="Cancel" oncomplete="PF('departmentdlg').hide();">
    					 <p:ajax update=":tabView1:form1:departments" listener="#{departmentBean.allDepartments()}"/>
    				</p:commandButton>
    			</h:panelGrid>
    		</h:form>
    	</p:dialog> 
				</div>
			</div>
		
		</div>

</h:body>
</html>